<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>의뢰 사이트</title>
    <link rel="stylesheet" href="./index.css">
    <script type="module" defer src="./index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header class="app-header">
        <div class="container header-inner">
            <a href="#/" class="brand">의뢰 사이트</a>
            <button class="hamburger" id="menuToggle" aria-label="메뉴 열기/닫기" aria-expanded="false" aria-controls="mainNav">
                <span></span><span></span><span></span>
            </button>
            
            <nav class="nav" id="mainNav" >
                <div class="menu-container">
                    <a href="#/requests">의뢰 리스트</a>
                    <a href="#/new-request" data-auth="required">의뢰 작성</a>
                    <a href="#/search">사용자 검색</a>
                    <a href="#/profile" data-auth="required">프로필</a>
                    <a href="#/customer">고객센터</a>
                    <a href="#/report">신고</a>
                    <a href="#/admin" id="adminLink" data-admin="required" style="display:none">관리자</a>
                    <button id="loginBtn" class="btn btn-primary">로그인</button>
                    <button id="adminLoginBtn" class="btn" style="display:none">관리자 로그인</button>
                    <button id="logoutBtn" class="btn btn-ghost" style="display:none">로그아웃</button>
                </div>
            </nav>
            <div class="nav-backdrop" id="navBackdrop" hidden></div>
        </div>
    </header>

    <main id="app" class="container"></main>

    <footer class="app-footer">
        <div class="container">
            <small>© <span id="year"></span> 의뢰 사이트 · RSI</small>
        </div>
    </footer>

    <!-- Messages Dialog (1:1 대화) -->
    <dialog id="messagesViewDialog">
        <div class="reviews-view-form" style="display:flex;flex-direction:column;height:600px;max-width:600px">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                <h3 id="messagesViewTitle">메시지</h3>
                <button type="button" class="btn btn-ghost" id="messagesViewClose" style="min-width:auto;padding:4px 8px">✕</button>
            </div>
            <div id="messagesList" style="flex:1;overflow-y:auto;padding-right:4px;margin-bottom:16px;display:flex;flex-direction:column;gap:8px">
                <p class="muted" style="text-align:center;padding:20px">로딩 중...</p>
            </div>
            <div id="messageFormSection" style="border-top:1px solid var(--border);padding-top:12px"></div>
        </div>
    </dialog>

    <!-- Reviews View Dialog -->
    <dialog id="reviewsViewDialog">
        <div class="reviews-view-form">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
                <h3 id="reviewsViewTitle">리뷰</h3>
                <button type="button" class="btn btn-ghost" id="reviewsViewClose" style="min-width:auto;padding:4px 8px">✕</button>
            </div>
            <div id="reviewsList" style="max-height:500px;overflow-y:auto;padding-right:4px">
                <p class="muted" style="text-align:center;padding:20px">로딩 중...</p>
            </div>
        </div>
    </dialog>

    <!-- Review Dialog -->
    <dialog id="reviewDialog">
        <form method="dialog" class="review-form" id="reviewForm">
            <h3>리뷰 작성</h3>
            <div class="field">
                <label>평점</label>
                <div class="rating-selector" id="ratingSelector">
                    <button type="button" class="rating-btn" data-rating="1">★</button>
                    <button type="button" class="rating-btn" data-rating="2">★</button>
                    <button type="button" class="rating-btn" data-rating="3">★</button>
                    <button type="button" class="rating-btn" data-rating="4">★</button>
                    <button type="button" class="rating-btn" data-rating="5">★</button>
                </div>
                <div class="rating-label" id="ratingLabel">평점을 선택해주세요</div>
            </div>
            <div class="field">
                <label>코멘트</label>
                <textarea id="reviewComment" placeholder="리뷰를 작성해주세요..."></textarea>
            </div>
            <div class="review-actions">
                <button type="button" class="btn" id="reviewClose">취소</button>
                <button type="submit" class="btn btn-primary" id="reviewSubmit">등록</button>
            </div>
        </form>
    </dialog>

    <!-- Auth Modal -->
    <dialog id="authDialog">
        <form method="dialog" class="auth-form" id="authForm">
            <h3 id="authTitle">로그인</h3>
            <label>
                이메일
                <input type="email" id="authEmail" required>
            </label>
            <label>
                비밀번호
                <div class="password-wrapper">
                    <input type="password" id="authPassword" minlength="6" required>
                    <button type="button" class="password-toggle" data-target="authPassword" aria-label="비밀번호 표시/숨기기">
                        <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <svg class="eye-off-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none">
                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                            <line x1="1" y1="1" x2="23" y2="23"></line>
                        </svg>
                    </button>
                </div>
            </label>
            <label>
                비밀번호 확인
                <div class="password-wrapper">
                    <input type="password" id="authPassword2" minlength="6" required>
                    <button type="button" class="password-toggle" data-target="authPassword2" aria-label="비밀번호 표시/숨기기">
                        <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <svg class="eye-off-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none">
                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                            <line x1="1" y1="1" x2="23" y2="23"></line>
                        </svg>
                    </button>
                </div>
            </label>
            <div class="auth-actions">
                <button type="submit" class="btn btn-primary" id="authSubmit">로그인</button>
                <button type="button" class="btn btn-ghost" id="toggleAuthMode">회원가입</button>
                <button type="button" class="btn" id="authClose">닫기</button>
            </div>
            <p class="auth-hint">GitHub Pages에서는 이메일/비밀번호 인증을 사용합니다.</p>
        </form>
    </dialog>

    <!-- Admin Auth Modal -->
    <dialog id="adminAuthDialog">
        <form method="dialog" class="auth-form" id="adminAuthForm">
            <h3 id="adminAuthTitle">관리자 로그인</h3>
            <label>
                이메일
                <input type="email" id="adminAuthEmail" required>
            </label>
            <label>
                비밀번호
                <div class="password-wrapper">
                    <input type="password" id="adminAuthPassword" minlength="6" required>
                    <button type="button" class="password-toggle" data-target="adminAuthPassword" aria-label="비밀번호 표시/숨기기">
                        <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <svg class="eye-off-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none">
                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                            <line x1="1" y1="1" x2="23" y2="23"></line>
                        </svg>
                    </button>
                </div>
            </label>
            <div class="auth-actions">
                <button type="submit" class="btn btn-primary" id="adminAuthSubmit">로그인</button>
                <button type="button" class="btn" id="adminAuthClose">닫기</button>
            </div>
            <p class="auth-hint">관리자만 로그인할 수 있습니다.</p>
        </form>
    </dialog>
</body>
</html>


